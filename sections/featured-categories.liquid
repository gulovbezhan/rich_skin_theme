{%- comment -%}
  Rich Skin 2026 - Featured Categories
  4-column featured category cards with images, overlay text, and links
{%- endcomment -%}

<div class="rs-featured-cats" data-section-id="{{ section.id }}" data-section-type="featured-categories">
  <div class="rs-featured-cats__header">
    {%- if section.settings.label != blank -%}
      <span class="rs-featured-cats__label">{{ section.settings.label | escape }}</span>
    {%- endif -%}
    {%- if section.settings.title != blank -%}
      <h2 class="rs-featured-cats__title">{{ section.settings.title | escape }}</h2>
    {%- endif -%}
  </div>

  <div class="rs-featured-cats__grid">
    {%- for block in section.blocks -%}
      <a href="{{ block.settings.link | default: '#' }}" class="rs-featured-cat" {{ block.shopify_attributes }} data-aos="row-of-4">

        {%- if block.settings.image != blank -%}
          {%- assign img_url = block.settings.image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
          <img class="rs-featured-cat__image lazyload"
            data-src="{{ img_url }}"
            data-widths="[360, 540, 720, 900, 1080]"
            data-aspectratio="{{ block.settings.image.aspect_ratio }}"
            data-sizes="auto"
            alt="{{ block.settings.heading | escape }}">
        {%- else -%}
          <div class="rs-featured-cat__placeholder" style="background: linear-gradient(135deg, {{ block.settings.placeholder_color }} 0%, {{ block.settings.placeholder_color | color_darken: 15 }} 100%);">
            {%- capture current -%}{% cycle 1, 2, 3, 4, 5, 6 %}{%- endcapture -%}
            {{ 'collection-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
        {%- endif -%}

        <div class="rs-featured-cat__overlay"></div>

        <div class="rs-featured-cat__content">
          {%- if block.settings.tag != blank -%}
            <div class="rs-featured-cat__label-tag">{{ block.settings.tag | escape }}</div>
          {%- endif -%}
          <h3 class="rs-featured-cat__name">{{ block.settings.heading | escape }}</h3>
          {%- if block.settings.description != blank -%}
            <p class="rs-featured-cat__desc">{{ block.settings.description | escape }}</p>
          {%- endif -%}
          <span class="rs-featured-cat__link">
            Shop Now
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
          </span>
        </div>
      </a>
    {%- endfor -%}

    {%- if section.blocks.size == 0 -%}
      {%- assign default_cats = "Face Tools,Body Care,Hair & Scalp,Wellness" | split: "," -%}
      {%- assign default_descs = "Advanced beauty tech,Nourish from head to toe,Revitalize your hair,Inner beauty rituals" | split: "," -%}
      {%- assign default_colors = "#f1b4ae,#e8d5b0,#c9a96e,#b8a9c9" | split: "," -%}
      {%- for cat in default_cats -%}
        <a href="#" class="rs-featured-cat">
          <div class="rs-featured-cat__placeholder" style="background: linear-gradient(135deg, {{ default_colors[forloop.index0] }} 0%, {{ default_colors[forloop.index0] | color_darken: 15 }} 100%);">
            {{ 'collection-' | append: forloop.index | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
          <div class="rs-featured-cat__overlay"></div>
          <div class="rs-featured-cat__content">
            <div class="rs-featured-cat__label-tag">Featured</div>
            <h3 class="rs-featured-cat__name">{{ cat }}</h3>
            <p class="rs-featured-cat__desc">{{ default_descs[forloop.index0] }}</p>
            <span class="rs-featured-cat__link">
              Shop Now
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
            </span>
          </div>
        </a>
      {%- endfor -%}
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "Featured Categories",
  "class": "index-section index-section--flush",
  "max_blocks": 4,
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "Section label",
      "default": "Popular"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Trending Categories"
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category Card",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Category name",
          "default": "Category Name"
        },
        {
          "type": "text",
          "id": "tag",
          "label": "Badge text",
          "default": "Featured"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Short description",
          "default": "Discover our curated selection"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "color",
          "id": "placeholder_color",
          "label": "Placeholder color",
          "default": "#f1b4ae"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Categories",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "heading": "Skin Devices",
            "tag": "Bestseller",
            "description": "Advanced beauty technology for radiant skin",
            "placeholder_color": "#f1b4ae"
          }
        },
        {
          "type": "category",
          "settings": {
            "heading": "Korean Skincare",
            "tag": "Trending",
            "description": "K-beauty secrets for flawless complexion",
            "placeholder_color": "#e8d5b0"
          }
        },
        {
          "type": "category",
          "settings": {
            "heading": "Body Care",
            "tag": "New",
            "description": "Nourish and pamper from head to toe",
            "placeholder_color": "#c9a96e"
          }
        },
        {
          "type": "category",
          "settings": {
            "heading": "Wellness",
            "tag": "Popular",
            "description": "Holistic wellness for mind and body",
            "placeholder_color": "#b8a9c9"
          }
        }
      ]
    }
  ]
}
{% endschema %}
